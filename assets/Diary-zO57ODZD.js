import{c as r,e as k,d as _,b as D,u as c,a as n,j as e,L as C}from"./index-BtyZ8Yc9.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],S=r("chevron-left",M);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],z=r("chevron-right",L);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],E=r("pen-tool",B);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],T=r("save",P);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],H=r("trash-2",$);function m(o){const i=new Date(o);return i.setHours(0,0,0,0),i.getTime()}function q(){const{date:o}=k(),i=_(),{toast:h}=D(),p=c(t=>t.loadNoteByDate),N=c(t=>t.saveNoteForDate),y=c(t=>t.deleteNoteById),a=c(t=>t.todayNote),l=n.useMemo(()=>{const t=Number(o);return Number.isFinite(t)&&t>0?m(t):m(Date.now())},[o]),[s,u]=n.useState(l),[d,x]=n.useState("");n.useEffect(()=>{u(l)},[l]),n.useEffect(()=>{p(s)},[s,p]),n.useEffect(()=>{x(a?.content??"")},[a]);function g(t){const w=s+t*24*60*60*1e3,v=m(w);u(v),i(`/diary/${v}`)}async function j(){await N(s,d),h({type:"success",message:"Saved"})}async function f(){a?.id&&(await y(a.id),x(""),h({type:"info",message:"Deleted note"}))}const b=new Date(s).toLocaleDateString();return e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(C,{to:"/tasks",className:"underline underline-offset-4",children:"← Back to Tasks"}),e.jsx("span",{className:"opacity-40",children:"/"}),e.jsx("span",{children:"Diary"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(-1),className:"inline-flex items-center gap-1 rounded-md border border-black/10 bg-white/70 px-3 py-1.5 hover:bg-white",children:[e.jsx(S,{className:"h-4 w-4"})," Prev"]}),e.jsx("div",{className:"text-sm opacity-70",children:b}),e.jsxs("button",{onClick:()=>g(1),className:"inline-flex items-center gap-1 rounded-md border border-black/10 bg-white/70 px-3 py-1.5 hover:bg-white",children:["Next ",e.jsx(z,{className:"h-4 w-4"})]})]})]}),e.jsx("div",{className:"relative mx-auto max-w-5xl select-none",children:e.jsxs("div",{className:"relative rounded-2xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/5 to-transparent pointer-events-none"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"relative p-6 bg-[repeating-linear-gradient(transparent,transparent_28px,rgba(0,0,0,0.045)_29px,rgba(0,0,0,0.045)_30px)] bg-white",children:[e.jsx("div",{className:"mb-3 text-xs tracking-wide uppercase opacity-60",children:b}),e.jsx("div",{className:"text-sm opacity-70",children:"Reflections"}),e.jsx("div",{className:"mt-3 h-[260px] rounded border border-black/10 bg-white/70 p-3 text-xs opacity-70 line-clamp-10 whitespace-pre-wrap",children:d||"(No entry yet)"})]}),e.jsxs("div",{className:"relative bg-white p-0",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-px bg-black/10"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-2 text-xs tracking-wide uppercase opacity-60",children:"Write"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:d,onChange:t=>x(t.target.value),placeholder:"Write your thoughts…",className:"w-full min-h-[340px] bg-[repeating-linear-gradient(transparent,transparent_28px,rgba(0,0,0,0.05)_29px,rgba(0,0,0,0.05)_30px)] focus:outline-none resize-none p-4 rounded-lg border border-black/10"}),e.jsxs("button",{onClick:()=>{document.querySelector("textarea")?.focus()},className:"hidden md:flex items-center gap-2 absolute -right-4 top-4 rotate-6 shadow-lg rounded-full bg-amber-300 text-black px-3 py-2 hover:rotate-3 transition",title:"Start writing",children:[e.jsx(E,{className:"h-4 w-4"}),"Pen"]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[a?.id&&a.date===s&&e.jsxs("button",{onClick:f,className:"inline-flex items-center gap-1 rounded-md bg-red-600 text-white px-3 py-1.5 hover:bg-red-700",children:[e.jsx(H,{className:"h-4 w-4"})," Delete"]}),e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-1 rounded-md bg-black text-white px-3 py-1.5 hover:bg-black/90",children:[e.jsx(T,{className:"h-4 w-4"})," Save"]})]})]})]})]}),e.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-2xl ring-1 ring-black/10"})]})})]})}export{q as default};
