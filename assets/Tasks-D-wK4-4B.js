import{c as B,u as l,a as d,b as I,j as s}from"./index-CJipJSgx.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],D=B("plus",L);function z(){const r=l(e=>e.tasks),S=l(e=>e.addTask),k=l(e=>e.toggleTask),y=l(e=>e.removeTask),n=l(e=>e.presets),f=l(e=>e.addPreset),E=l(e=>e.removePreset),[j,N]=d.useState(""),[b,p]=d.useState(""),{toast:c}=I(),v=l(e=>e.todayNote),w=l(e=>e.loadTodayNote),M=l(e=>e.saveTodayNote),[T,C]=d.useState("");d.useEffect(()=>{w()},[w]),d.useEffect(()=>{C(v?.content??"")},[v]);const{todayPresets:x,otherTasks:A}=d.useMemo(()=>{const e=new Date;e.setHours(0,0,0,0);const t=e.getTime(),m=t+1440*60*1e3-1,i=a=>typeof a=="number"&&a>=t&&a<=m,o=new Set(n),h=r.filter(a=>o.has(a.title)&&i(a.dueAt??null)),g=r.filter(a=>!(o.has(a.title)&&i(a.dueAt??null)));return{todayPresets:h,otherTasks:g}},[r,n]);function H(e){const t=new Date(e);return t.setHours(0,0,0,0),t.getTime()}const R=d.useMemo(()=>{const e=new Map,t=H(Date.now());for(const m of n){let i=0,o=t;for(let h=0;h<365;h++){const g=o+864e5-1;if(!r.some(u=>u.title===m&&(u.dueAt??0)>=o&&(u.dueAt??0)<=g&&!!u.completedAt))break;i+=1,o-=1440*60*1e3}e.set(m,i)}return e},[r,n]);async function P(){const e=j.trim();e&&(await S({title:e}),N(""),c({type:"success",title:"Task added",message:e}))}const K=x.filter(e=>!!e.completedAt).length,_=x.length;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tasks"}),s.jsx("p",{className:"text-sm text-black/60",children:"Daily check-ins and everything else"})]}),s.jsxs("div",{className:"rounded-full bg-black/5 text-black/70 text-xs px-3 py-1",children:["Today ",K,"/",_]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[s.jsxs("div",{className:"rounded-2xl border border-black/5 bg-white/70 backdrop-blur p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Today's Check-ins"}),s.jsx("span",{className:"text-xs text-black/50",children:"Auto-added"})]}),s.jsxs("ul",{className:"divide-y divide-black/5",children:[x.length===0&&s.jsx("li",{className:"p-3 text-sm text-black/60",children:"No check-ins found for today"}),x.map(e=>s.jsxs("li",{className:"flex items-center justify-between p-3",children:[s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:!!e.completedAt,onChange:async()=>{await k(e.id),c({type:"success",message:e.completedAt?"Marked incomplete":"Checked in!"})},className:"h-4 w-4 rounded border-black/20 text-blue-600 focus:ring-blue-500/30"}),s.jsx("span",{className:e.completedAt?"line-through text-black/50":"",children:e.title}),s.jsxs("span",{className:"ml-2 text-xs rounded-full bg-black/5 px-2 py-0.5 text-black/70",children:[R.get(e.title)||0,"d"]})]}),s.jsx("button",{onClick:async()=>{await y(e.id),c({type:"info",message:"Deleted"})},className:"text-xs text-red-600 hover:text-red-700",children:"Delete"})]},e.id))]})]}),s.jsxs("div",{className:"rounded-2xl border border-black/5 bg-white/70 backdrop-blur p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Presets"}),s.jsx("span",{className:"text-xs text-black/50",children:"Daily check-ins"})]}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{value:b,onChange:e=>p(e.target.value),placeholder:"Add preset (e.g., Read)",className:"w-full rounded-xl border border-black/10 bg-white px-3 py-2 shadow-sm outline-none focus:ring-2 focus:ring-blue-500/20",onKeyDown:e=>e.key==="Enter"&&(()=>{const t=b.trim();t&&(f(t),p(""),c({type:"success",message:"Preset added"}))})()}),s.jsxs("button",{onClick:()=>{const e=b.trim();e&&(f(e),p(""),c({type:"success",message:"Preset added"}))},className:"inline-flex items-center gap-1 rounded-xl bg-black text-white px-4 py-2 hover:bg-black/90",children:[s.jsx(D,{className:"h-4 w-4"})," Add"]})]}),s.jsxs("ul",{className:"divide-y divide-black/5",children:[n.length===0&&s.jsx("li",{className:"p-3 text-sm text-black/60",children:"No presets"}),n.map(e=>s.jsxs("li",{className:"flex items-center justify-between p-3 text-sm",children:[s.jsx("span",{children:e}),s.jsx("button",{onClick:()=>{E(e),c({type:"info",message:"Preset removed"})},className:"text-xs text-red-600 hover:text-red-700",children:"Remove"})]},e))]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[s.jsx("div",{className:"rounded-2xl border border-black/5 bg-white/70 backdrop-blur p-4 shadow-sm",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:j,onChange:e=>N(e.target.value),placeholder:"Add a task",className:"w-full rounded-xl border border-black/10 bg-white px-3 py-2 shadow-sm outline-none focus:ring-2 focus:ring-blue-500/20",onKeyDown:e=>e.key==="Enter"&&P()}),s.jsxs("button",{onClick:P,className:"inline-flex items-center gap-1 rounded-xl bg-black text-white px-4 py-2 hover:bg-black/90",children:[s.jsx(D,{className:"h-4 w-4"})," Add"]})]})}),s.jsxs("div",{className:"rounded-2xl border border-black/5 bg-white/70 backdrop-blur p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Daily Diary"}),s.jsx("span",{className:"text-xs text-black/50",children:"Private note for today"})]}),s.jsx("textarea",{value:T,onChange:e=>C(e.target.value),placeholder:"How was your day? Thoughts, reflections, duas...",className:"w-full min-h-[120px] rounded-xl border border-black/10 bg-white px-3 py-2 shadow-sm outline-none focus:ring-2 focus:ring-blue-500/20"}),s.jsx("div",{className:"mt-3 flex justify-end",children:s.jsx("button",{onClick:async()=>{await M(T),c({type:"success",message:"Saved"})},className:"inline-flex items-center gap-1 rounded-xl bg-black text-white px-4 py-2 hover:bg-black/90",children:"Save"})})]}),s.jsx("div",{className:"rounded-2xl border border-black/5 bg-white/70 backdrop-blur p-2 shadow-sm",children:s.jsxs("ul",{className:"divide-y divide-black/5",children:[A.length===0&&s.jsx("li",{className:"p-4 text-sm text-black/60",children:"No tasks yet"}),A.map(e=>s.jsxs("li",{className:"flex items-center justify-between p-3",children:[s.jsxs("label",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:!!e.completedAt,onChange:()=>k(e.id),className:"h-4 w-4 rounded border-black/20 text-blue-600 focus:ring-blue-500/30"}),s.jsx("span",{className:e.completedAt?"line-through text-black/50":"",children:e.title})]}),s.jsx("button",{onClick:async()=>{await y(e.id),c({type:"info",message:"Deleted"})},className:"text-xs text-red-600 hover:text-red-700",children:"Delete"})]},e.id))]})})]})]})]})}export{z as default};
